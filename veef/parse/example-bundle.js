const e=(e,n)=>{customElements.define(e,class extends HTMLElement{constructor(){super(),this._r=this.attachShadow({mode:"open"})}connectedCallback(){const e=this._r;let r={h:0,f:[],r:()=>{r.h=0,r.f=[]},d:{},slot:(e,t)=>(o.n=e,o),ref:e=>u[e],track:t=>{let o=++r.h;const s=t=>{r.d[o]=t,(()=>{let t=r.f;r.r();let o=n(r);a(l,o,e),l=o,t.map((t=>t(e)))})()};return o in r.d?{value:r.d[o],set:s}:(r.d[o]=t,{value:t,set:s})},onRender:e=>{r.f.push(e)}},l=n(r);e.append(t(l)),r.f.map((t=>t(e)))}attributeChangedCallback(e,t,n){}})},t=e=>{if(e.charAt)return document.createTextNode(e);let n=e.name;"root"==n&&(n="div");let r=document.createElement(n);return"slot"==n&&(r.name=e.n),e.props.map((e=>{d(e,r)||(r[e.name]=e.value)})),r.append(...e.children.map((e=>t(e)))),r},n=e=>"on"==e.name.substr(0,2),r=(e,a,l,o)=>{if(i(a))return void(l&&l.remove());if(i(e))return void(a&&o.append(t(a)));if(!a.el||!e.el)return e!==a?void l.replaceWith(t(a)):void 0;if(e.name!=a.name)return void l.replaceWith(t(a));a.props.filter((e=>!n(e)&&"ref"!=e.name&&e.value!=a.props[e.key])).map((e=>l[e.key]=e.value)),a.props.map((e=>d(e,l)));const s=t=>{t.children.map(((t,n)=>r(e.children[n],a.children[n],l.childNodes[n],l)))};s(a),s(e)},a=(e,t,n)=>r(e,t,n.children[0]),l=e=>({name:e,props:[],children:[""],x:0,el:1}),o={},s=(e,...t)=>{const n=99,r=e=>{const t=l("slot");t.n=e,a[m].push(t)};let a=l("root"),s=a,p=null,u=2;const d=[a],m="children",f=e=>a[m].push(e),h=e=>{a.x=f(e),f("")},v=e=>a.props[0].value+=p,b=e=>e.map((e=>e.el?e:c(e))).filter((e=>""!==e));let k={0:{">":2," ":1,"/":4,[n]:()=>{a.name+=p}},1:{">":2," ":1,"/":4,[n]:()=>{a.props.unshift({name:p,value:""}),u=6}},6:{"=":7,[n]:()=>{a.props[0].name+=p}},7:{'"':8,"'":9,[n]:v},8:{'"':1,[n]:v},9:{"'":1,[n]:v},2:{[n]:()=>{if("<"==p)return a[m]=b(a[m]),void(u=3);a[m][a.x]+=p}},3:{"/":4,[n]:()=>{const e=l(p);d.push(a),h(e),a=e,u=0}},4:{[n]:()=>{">"==p&&(a=d.pop(),u=2)}}},x=0;for(var E=0;;E++){if(E>=e[x].length){if(x>=t.length)break;const n=t[x];if(6!=u&&7!=u||(a.props[0].value=n,u=1),2==u&&(n===o?r(o.n):h(n.toString())),E=0,x++,i(e[x][0]))break}p=e[x][E];let n=k[u];p in n?u=n[p]:n[99]()}return s[m]=b(s[m]),s},i=e=>void 0===e;let p=[],u={};const d=(e,t)=>{if("ref"==e.name)return u[e.value]=t,!0;if("function"==typeof e.value&&n(e)){let n=e.name.toLowerCase().substr(2);return p.filter((e=>e.name==n&&e.el==t)).map((e=>t.removeEventListener(n,e.fn))),p.push({name:n,el:t,fn:e.value}),t.addEventListener(n,e.value),!0}return!1},c=e=>{if(""===e)return"";let t=e.trim(),n="",r="";return e[0]!==t[0]&&(n=" "),e.substr(-1)!==t.substr(-1)&&(r=" "),""==t&&n==r?n:n+t+r};export{e as createElement,s as h};
