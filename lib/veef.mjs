const e=(e,r)=>{customElements.define(e,class extends HTMLElement{constructor(){super(),this._r=this.attachShadow({mode:"open"})}connectedCallback(){const e=this._r;let l={c:"",h:0,f:[],r:()=>{l.c="",l.h=0,l.f=[]},d:{},addStyle:e=>l.c+=e,slot:(e,t)=>(o.n=e,o),ref:e=>d[e],add:t=>{let s=++l.h;const o=t=>{l.d[s]=t,(()=>{let t=l.f;l.r();let s=i(r(l));n(c,s,e),c=s,t.map((t=>t(e)))})()};return s in l.d?{val:l.d[s],set:o}:(l.d[s]=t,{val:t,set:o})},onRender:e=>{l.f.push(e)}};const i=e=>{const t=s("style");return t.children[0]=l.c,e.children.unshift(t),e};let c=i(r(l));e.append(t(c)),l.f.map((t=>t(e)))}attributeChangedCallback(e,t,r){console.log(e,t,r)}})},t=e=>{if(e.charAt)return document.createTextNode(e);let r=e.name;"root"==r&&(r="div");let n=document.createElement(r);return"slot"==r&&(n.name=e.n),a(e.props,n),n.append(...e.children.map((e=>t(e)))),n},r=(e,n,s,o)=>{if(i(n))return void(s&&s.remove());if(i(e))return void(n&&o.append(t(n)));if(!n.el||!e.el)return e!==n?void s.replaceWith(t(n)):void 0;if(e.name!=n.name)return void s.replaceWith(t(n));a(n.props.filter((t=>{return t[1]!=(r=t,e.props.find((e=>e[0]==r[0]))[1]);var r})),s);const l=t=>{t.children.map(((t,o)=>r(e.children[o],n.children[o],s.childNodes[o],s)))};l(n),l(e)},n=(e,t,n)=>r(e,t,n.children[0]),s=e=>({name:e,props:[],children:[""],x:0,el:1}),o={},l=(e,...t)=>{const r=15,n=e=>{const t=s("slot");t.n=e||"",l[h].push(t)};let l=s("root"),c=l,d=null,a=2;const u=[l],h="children",f=e=>l[h].push(e),m=e=>{l.x=f(e),f("")},v=e=>l.props[0][1]+=d,b=e=>e.map((e=>e.el?e:p(e))).filter((e=>""!==e));let x={0:{">":2," ":1,"/":4,[r]:()=>{l.name+=d}},1:{">":2," ":1,"/":4,[r]:()=>{l.props.unshift([d,""]),a=6}},6:{"=":7,[r]:()=>{l.props[0][0]+=d}},7:{'"':8,"'":9,[r]:v},8:{'"':1,[r]:v},9:{"'":1,[r]:v},2:{[r]:()=>{if("<"==d)return l[h]=b(l[h]),void(a=3);l[h][l.x]+=d}},3:{"/":4,[r]:()=>{const e=s(d);u.push(l),m(e),l=e,a=0}},4:{[r]:()=>{">"==d&&(l=u.pop(),a=2)}}},E=0;for(var g=0;;g++){if(g>=e[E].length){if(E>=t.length)break;const r=t[E];if(6!=a&&7!=a||(l.props[0][1]=r,a=1),2==a&&(r===o?n(o.n):m(r.toString())),g=0,E++,i(e[E][0]))break}d=e[E][g],2!=a&&8!=a&&9!=a&&(d=d.replace(/\s/," "));let r=x[a];d in r?a=r[d]:r[15]()}return c[h]=b(c[h]),c},i=e=>void 0===e;let c=[],d={};const a=(e,t)=>{e.map((e=>{const r=e[0],n=e[1];if("class"==r&&!n.trim){const e=t.classList;return e.forEach((e=>e in n?null:n[e]=!1)),void Object.entries(n).map((t=>t[1]?e.add(t[0]):e.remove(t[0])))}if("ref"!=r){if((e=>"on"==e.substr(0,2))(r)&&!n.trim){let e=r.toLowerCase().substr(2);return c.filter((r=>r[0]==e&&r[1]==t)).map((r=>t.removeEventListener(e,r[2]))),c.push({0:e,1:t,2:n}),void t.addEventListener(e,n)}t.setAttribute(r,n)}else d[n]=t}))},p=e=>{if(""===e)return"";let t=e.trim(),r="",n="";return e[0]!==t[0]&&(r=" "),e.substr(-1)!==t.substr(-1)&&(n=" "),""==t&&r==n?r:r+t+n};export{e as createElement,l as h};
